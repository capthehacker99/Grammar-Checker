
(function() {
	const colors = ["#FF0000","#FFBF00","#80FF00","#00FF40","#00FFFF","#0040FF","#9933FF","#FF00BF","#FFFFFF","#7F7F7F","#000000","#BF4040","#BF9F40","#80BF40","#80BF40","#40BF60","#40BFBF","#4060BF","#8040BF","#BF409F"];
	var THEgetCookie = function(cname) {
	  var name = cname + "=";
	  var ca = document.cookie.split(';');
	  for(var i = 0; i < ca.length; i++) {
		var c = ca[i];
		while (c.charAt(0) == ' ') {
		  c = c.substring(1);
		}
		if (c.indexOf(name) == 0) {
		  return c.substring(name.length, c.length);
		}
	  }
	  return "";
	}
	var getRandomInt = function(max) {
		return Math.floor(Math.random() * max);
	}
	var FindByAttributeValue = function(doc,attribute, value, element_type)   {
		element_type = element_type || "*";
		var All = doc.getElementsByTagName(element_type);
		for (var i = 0; i < All.length; i++) {
			if (All[i].getAttribute(attribute) == value) { return All[i]; }
		}
	}
	var FindByAttributeValueAndInteractable = function(doc,attribute, value, element_type)   {
		element_type = element_type || "*";
		var All = doc.getElementsByTagName(element_type);
		for (var i = 0; i < All.length; i++) {
			if (All[i].getAttribute(attribute) == value && All[i].getAttribute("data-rcfinteraction") != null) { return All[i]; }
		}
	}
	var ofetch = fetch;
	var getindexofvalue = function(answers,val,orig){
		for (var i = 0; i < answers.length; i++) {
			if(answers[i].value == val){
				return i;
			}
		}
		return orig;
	}
	fetch = function(a,b){
		if(a != null){
			var thefetch = ofetch(a,b);
			thefetch.then(function(ores){
				if(ores.ok && ores.status == 200){
					var res = ores.clone();
					res.text().then(function(text) {
						try{
							var thejson = JSON.parse(text);
							if(thejson != null && thejson.id != null && thejson.rcfVersion != null && thejson.answers != null){
								var contacts = new Map();
								thejson.answers.forEach(function(obj,index2addr) {
									if(obj.type != null){
										if(obj.type == "simple"){
											if(obj.elm != null){
												if(obj.elm.startsWith("locating")){
													setTimeout(function(){
														var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
														if(dropbox != null){
															dropbox.addEventListener("mouseover",function(){
																if(THEgetCookie("unitClose") == "1"){
																	dropbox.title = obj.value;
																}
															});
															dropbox.addEventListener("mouseleave",function(){
																if(THEgetCookie("unitClose") == "1"){
																	dropbox.title = "";
																}
															});
														}
													},1000);
												}
												if(obj.elm.startsWith("radio")){
													setTimeout(function(){
														var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
														if(dropbox != null){
															var Tdropbox = FindByAttributeValue(dropbox,"data-rcfid",obj.value);
															if(Tdropbox != null){
																var orisb = Tdropbox.title;
																Tdropbox.addEventListener("mouseover",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		Tdropbox.title = "yes";
																	}
																});
																Tdropbox.addEventListener("mouseleave",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		Tdropbox.title = orisb
																	}
																});
															}
														}
													},1000);
												}
												if(obj.elm.startsWith("complexDroppable")){
														setTimeout(function(){
															var currentcolor = "Background-color: "+colors[getindexofvalue(thejson.answers,obj.value,index2addr)];
															if(typeof(obj.value) == "object"){
																obj.value.forEach(function(obj2,index) {
																	var Tdropbox = FindByAttributeValue(document,"data-rcfid",obj2);
																	if(Tdropbox != null){
																		var orisb = Tdropbox.style;
																		
																		Tdropbox.addEventListener("mouseover",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				Tdropbox.style = currentcolor;
																			}
																		});
																		
																			Tdropbox.addEventListener("mouseleave",function(){
																				if(THEgetCookie("unitClose") == "1"){
																					Tdropbox.style = orisb;
																				}
																			});
																		
																	}
																});
															}else{
																var Tdropbox = FindByAttributeValue(document,"data-rcfid",obj.value);
																if(Tdropbox != null){
																	var orisb = Tdropbox.style;
																	
																	Tdropbox.addEventListener("mouseover",function(){
																		if(THEgetCookie("unitClose") == "1"){
																			Tdropbox.style = currentcolor;
																		}
																	});
																	
																		Tdropbox.addEventListener("mouseleave",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				Tdropbox.style = orisb;
																			}
																		});
																	
																}
															}
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															if(dropbox != null){
																var orisa = dropbox.style;
																dropbox.addEventListener("mouseover",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.style = currentcolor;
																	}
																});
																dropbox.addEventListener("mouseleave",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.style = orisa;
																	}
																});
															}
														},1000);
												}
												if(obj.elm.startsWith("droppable")){
														setTimeout(function(){
															var currentcolor = "Background-color: "+colors[getindexofvalue(thejson.answers,obj.value,index2addr)];
															var Tdropbox = FindByAttributeValue(document,"data-rcfid",obj.value);
															if(Tdropbox != null){
																var orisb = Tdropbox.style;
																
																Tdropbox.addEventListener("mouseover",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		Tdropbox.style = currentcolor;
																	}
																});
																
																	Tdropbox.addEventListener("mouseleave",function(){
																		if(THEgetCookie("unitClose") == "1"){
																			Tdropbox.style = orisb;
																		}
																	});
																
															}
															
															var dropbox = FindByAttributeValueAndInteractable(document,"data-rcfid",obj.elm);
															if(dropbox != null){
																var orisa = dropbox.style;
																dropbox.addEventListener("mouseover",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.style = currentcolor;
																	}
																});
																dropbox.addEventListener("mouseleave",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.style = orisa;
																	}
																});
															}
														},1000);
												}
												if(obj.elm.startsWith("dropDown")){
													setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															var dropbox2 = FindByAttributeValue(dropbox,"data-rcfid",obj.value,"option");
															if(dropbox != null && dropbox2 != null){
																	if(THEgetCookie("unitClose") == "1"){
																		var All = dropbox.getElementsByTagName("option");
																		for (var i = 0; i < All.length; i++) {
																			if(All[i] != dropbox2){
																				All[i].style="color: #8F8F8F"
																			}
																		}
																	}
																document.getElementById("submit-button").addEventListener("mouseover",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		var All = dropbox.getElementsByTagName("option");
																		for (var i = 0; i < All.length; i++) {
																			if(All[i] != dropbox2){
																				All[i].style="";
																			}
																		}
																	}
																});
																document.getElementById("submit-button").addEventListener("mouseleave",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		var All = dropbox.getElementsByTagName("option");
																		for (var i = 0; i < All.length; i++) {
																			if(All[i] != dropbox2){
																				All[i].style="color: #8F8F8F"
																			}
																		}
																	}
																});
															}
														},1000);
												}
												if(obj.elm.startsWith("typein")){
													setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															dropbox = FindByAttributeValue(dropbox,"type","text","input");
															if(dropbox != null){
																dropbox.addEventListener("input",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.value = obj.value.substring(0,dropbox.value.length);
																	}
																});
															}
														},1000);
												}
												if(obj.elm.startsWith("mlTypein")){
													setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															dropbox = FindByAttributeValue(dropbox,"",null,"textarea");
															if(dropbox != null){
																dropbox.addEventListener("input",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.value = obj.value.substring(0,dropbox.value.length);
																	}
																});
															}
														},1000);
												}
											}
										}
										if(obj.type == "choice"){
											if(obj.elm != null){
												if(obj.elm.startsWith("typein")){
														setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															dropbox = FindByAttributeValue(dropbox,"type","text","input");
															if(dropbox != null){
																dropbox.addEventListener("input",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.value = obj.value[0].substring(0,dropbox.value.length);
																	}
																});
															}
														},1000);
													
												}
												if(obj.elm.startsWith("complexDroppable")){
														setTimeout(function(){
															
															var currentcolor = "Background-color: "+colors[getindexofvalue(thejson.answers,obj.value,index2addr)];
															if(typeof(obj.value) == "object"){
																obj.value.forEach(function(obj2,index) {
																	var Tdropbox = FindByAttributeValue(document,"data-rcfid",obj2);
																	if(Tdropbox != null){
																		if(!contacts.has(Tdropbox)){
																			contacts.set(Tdropbox,[currentcolor]);
																			var orisb = Tdropbox.style;
																			var intervalindex = 0;
																		
																			Tdropbox.addEventListener("mouseover",function(){
																				if(THEgetCookie("unitClose") == "1"){
																					var startindex = 0
																					var temparray = contacts.get(Tdropbox);
																					var tempfunction = function(){
																						if(!(startindex < temparray.length)){
																							startindex = 0;
																						}
																						Tdropbox.style = temparray[startindex];
																						startindex++;
																					}
																					tempfunction();
																					intervalindex = setInterval(tempfunction,500);

																					
																				}
																			});
																		
																			Tdropbox.addEventListener("mouseleave",function(){
																				clearInterval(intervalindex);
																				intervalindex = 0;
																				if(THEgetCookie("unitClose") == "1"){
																					Tdropbox.style = orisb;
																					
																				}
																			});
																			
																		}else{
																			var temparray = contacts.get(Tdropbox);
																			temparray.push(currentcolor)
																			contacts.set(Tdropbox,temparray);
																		}
																		
																	}
																});
															}else{
																var Tdropbox = FindByAttributeValue(document,"data-rcfid",obj.value);
																if(Tdropbox != null){
																	var orisb = Tdropbox.style;
																	
																	Tdropbox.addEventListener("mouseover",function(){
																		if(THEgetCookie("unitClose") == "1"){
																			Tdropbox.style = currentcolor;
																		}
																	});
																	
																		Tdropbox.addEventListener("mouseleave",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				Tdropbox.style = orisb;
																			}
																		});
																	
																}
															}
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															if(dropbox != null){
																var orisa = dropbox.style;
																dropbox.addEventListener("mouseover",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.style = currentcolor;
																	}
																});
																dropbox.addEventListener("mouseleave",function(){
																	if(THEgetCookie("unitClose") == "1"){
																		dropbox.style = orisa;
																	}
																});
															}
														},1000);
												}
												if(obj.elm.startsWith("locating")){
													setTimeout(function(){
														var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
														if(dropbox != null){
															dropbox.addEventListener("mouseover",function(){
																if(THEgetCookie("unitClose") == "1"){
																	dropbox.title = obj.value[getRandomInt(obj.value.length)];
																}
															});
															dropbox.addEventListener("mouseleave",function(){
																if(THEgetCookie("unitClose") == "1"){
																	dropbox.title = "";
																}
															});
														}
													},1000);
												}
											}
											
										}
										if(obj.type == "composite"){
											if(obj.elm != null){
												if(obj.elm.startsWith("matching")){
														setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															if(dropbox != null){
																obj.value.forEach(function(obj2,index) {
																	var newdropbox = FindByAttributeValue(dropbox,"data-rcfid",obj2.elm);
																	var Tnewdropbox = FindByAttributeValue(dropbox,"data-rcfid",obj2.value);
																	if(newdropbox != null && Tnewdropbox != null){
																		var orisa = newdropbox.style;
																		var orisb = Tnewdropbox.style;
																		newdropbox.addEventListener("mouseover",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				newdropbox.style = "Background-color: "+colors[index];
																			}
																		});
																		Tnewdropbox.addEventListener("mouseover",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				Tnewdropbox.style = "Background-color: "+colors[index];
																			}
																		});
																		newdropbox.addEventListener("mouseleave",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				newdropbox.style = orisa
																			}
																		});
																		Tnewdropbox.addEventListener("mouseleave",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				Tnewdropbox.style = orisb
																			}
																		});
																	}
																});
															}
														},1000);
													
												}
												if(obj.elm.startsWith("c1")){
														setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															if(dropbox != null){
																obj.value.forEach(function(obj2,index) {
																	var newdropbox = FindByAttributeValue(dropbox,"data-rcfid",obj2.elm);
																	var Tnewdropbox = FindByAttributeValue(dropbox,"data-rcfid",obj2.value);
																	if(newdropbox != null && Tnewdropbox != null){
																		var orisa = newdropbox.style;
																		var orisb = Tnewdropbox.style;
																		newdropbox.addEventListener("mouseover",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				newdropbox.style = "Background-color: "+colors[index];
																			}
																		});
																		Tnewdropbox.addEventListener("mouseover",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				Tnewdropbox.style = "Background-color: "+colors[index];
																			}
																		});
																		newdropbox.addEventListener("mouseleave",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				newdropbox.style = orisa
																			}
																		});
																		Tnewdropbox.addEventListener("mouseleave",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				Tnewdropbox.style = orisb
																			}
																		});
																	}
																});
															}
														},1000);
													
												}
											}
										}
										if(obj.type == "list"){
											if(obj.elm != null){
												if(obj.elm.startsWith("checkbox")){
														setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															if(dropbox != null){
																obj.value.forEach(function(obj2,gay){
																	var noob = FindByAttributeValue(dropbox,"data-rcfid",obj2);
																	if(noob != null){
																		noob.addEventListener("mouseover",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				noob.style = "Background-color: #F0F0F0";
																			}
																		});
																		noob.addEventListener("mouseleave",function(){
																			if(THEgetCookie("unitClose") == "1"){
																				noob.style = ""
																			}
																		});
																	}
																});
															}
														},1000);
												}
											}
										}
										if(obj.type == "sequence"){
											if(obj.elm != null){
												if(obj.elm.startsWith("ordering")){
														setTimeout(function(){
															var dropbox = FindByAttributeValue(document,"data-rcfid",obj.elm);
															if(dropbox != null){
																var All = dropbox.getElementsByTagName("li");
																for (var i = 0; i < All.length; i++) {
																	(function(){
																		var tarrr = All[i];
																		tarrr.addEventListener("mouseover",function(){
																			tarrr.title = tarrr.getAttribute("data-rcfid");
																		});
																		All[i].addEventListener("mouseleave",function(){
																			tarrr.title = "";
																		});
																	})();
																}
															}
														},1000);
												}
											}
										}
									}
								});
							}
						}catch(err){
							
						}
					});
				}
			});
			return thefetch;
		}else{
			return ofetch(a,b);
		}
	}
})();